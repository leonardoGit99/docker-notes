
---
**Dockerfile** = un archivo de texto donde defines **cómo construir una imagen Docker**.

- Contiene instrucciones paso a paso: qué sistema operativo usar, qué dependencias instalar, qué archivos copiar, qué comando ejecutar al iniciar el contenedor.
    
- Piensa en él como **una receta de cocina** para tu contenedor.

>Estructura básica de un Dockerfile (express)

```dockerfile
	FROM node:20-alpine
	WORKDIR /app
	COPY package*.json ./
	RUN npm install
	COPY . .
	Compila TypeScript a dist/
	RUN npm run build
	EXPOSE 4000
	CMD ["node", "dist/index.js"]	
```

> Estructura básica de un Dockerfile (nextjs)

```dockerfile
    # 1. Imagen base ligera de Node
	FROM node:20-alpine
	
	# 2. Crear carpeta de trabajo
	WORKDIR /app
	
	# 3. Copiar package.json y package-lock.json
	COPY package*.json ./
	
	# 4. Instalar dependencias
	RUN npm install
	
	# 5. Copiar el resto del código
	COPY . .
	
	# 6. Variables de entorno (desde docker-compose, opcional aquí)
	ENV NEXT_PUBLIC_API_URL=http://backend:4000
	
	# 7. Build de Next.js
	# Usar getServerSideProps evita problemas de prerendering
	RUN npm run build
	
	# 8. Puerto en el que corre Next.js
	EXPOSE 3000
	
	# 9. Comando para iniciar la app (comando + argumentos)
	CMD ["npm", "start"]
```